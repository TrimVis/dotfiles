#!/usr/bin/env bash

HW_PIDS=$(bspc query -N -n .leaf.hidden)
ROFI_ENTRIES=""

for PID in $HW_PIDS; do
	NAME=$(xdotool getwindowname $PID)
	ROFI_ENTRIES="$PID - $NAME\n$ROFI_ENTRIES"
done

#Show window list with correspongind PIDs
SEL=$(echo -e "$ROFI_ENTRIES" | rofi -dmenu)

#Get PID of selection
SEL_PID=$(echo "$SEL" | awk -F'-' '{ print $1 }')

#echo "$SEL"
#echo "$SEL_PID"

[ -z $SEL_PID ] && exit 0

#Move window to current desktop
bspc node $SEL_PID -d focused
bspc node $SEL_PID -g hidden=off
